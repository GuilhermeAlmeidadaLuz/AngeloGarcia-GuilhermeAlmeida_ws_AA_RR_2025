#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <limits.h>

// Function to find the nearest unvisited city
int acharVizinhoMaisPerto(int cidade_atual, int n, int distancia[n][n], bool visitado[]) {
    int distancia_min = INT_MAX;
    int cidade_mais_perta = -1;

    for (int i = 0; i < n; i++) {
        if (!visitado[i] && distancia[cidade_atual][i] < distancia_min && i != cidade_atual) {
            distancia_min = distancia[cidade_atual][i];
            cidade_mais_perta = i;
        }
    }

    return cidade_mais_perta;
}

// Nearest Neighbor TSP algorithm
void tspVizinhoMaisPerto(int n, int distancia[n][n], int caminho[], int *distancia_total) {
    bool visitado[n];
    for (int i = 0; i < n; i++) visitado[i] = false;

    // Start from city 0
    int cidade_atual = 0;
    caminho[0] = cidade_atual;
    visitado[cidade_atual] = true;
    *distancia_total = 0;

    for (int i = 1; i < n; i++) {
        int proxima_cidade = acharVizinhoMaisPerto(cidade_atual, n, distancia, visitado);
        if (proxima_cidade == -1) break; // Shouldn't happen for complete graphs

        caminho[i] = proxima_cidade;
        *distancia_total += distancia[cidade_atual][proxima_cidade];
        visitado[proxima_cidade] = true;
        cidade_atual = proxima_cidade;
    }

    // Return to starting city
    *distancia_total += distancia[cidade_atual][caminho[0]];
}

// Function to print the results
void printResults(int n, int path[], int total_distance) {
    printf("Melhor rota encontrada: ");
    for (int i = 0; i < n; i++) {
        printf("%d -> ", path[i]);
    }
    printf("%d\n", path[0]);
    printf("Distância total: %d\n", total_distance);
}

// ========== GRAFOS (os mesmos do seu código original) ==========
#define N1 5
int g1[N1][N1] = {
    {0, 12, 10, 19, 8},
    {12, 0, 3, 7, 2},
    {10, 3, 0, 6, 20},
    {19, 7, 6, 0, 4},
    {8, 2, 20, 4, 0}
};

#define N2 8
int g2[N2][N2] = {
    {0, 12, 18, 5, 21, 9, 14, 7},
    {12, 0, 6, 15, 30, 11, 8, 3},
    {18, 6, 0, 9, 22, 19, 4, 13},
    {5, 15, 9, 0, 17, 10, 25, 16},
    {21, 30, 22, 17, 0, 8, 20, 28},
    {9, 11, 19, 10, 8, 0, 7, 14},
    {14, 8, 4, 25, 20, 7, 0, 12},
    {7, 3, 13, 16, 28, 14, 12, 0}
};

#define N3 10

int g3[N3][N3] = {
    {0, 5, 8, 12, 7, 15, 20, 9, 11, 3},
    {5, 0, 6, 9, 4, 18, 14, 7, 10, 2},
    {8, 6, 0, 11, 5, 13, 17, 8, 12, 4},
    {12, 9, 11, 0, 8, 6, 10, 15, 7, 13},
    {7, 4, 5, 8, 0, 12, 16, 6, 9, 5},
    {15, 18, 13, 6, 12, 0, 5, 11, 8, 14},
    {20, 14, 17, 10, 16, 5, 0, 13, 4, 18},
    {9, 7, 8, 15, 6, 11, 13, 0, 10, 8},
    {11, 10, 12, 7, 9, 8, 4, 10, 0, 9},
    {3, 2, 4, 13, 5, 14, 18, 8, 9, 0}
};

#define N4 11

int g4[N4][N4] = {
    {0, 12, 45, 23, 67, 34, 89, 56, 21, 78, 43},
    {12, 0, 33, 87, 42, 91, 24, 76, 55, 38, 80},
    {45, 33, 0, 65, 18, 77, 52, 29, 84, 47, 11},
    {23, 87, 65, 0, 49, 26, 73, 40, 95, 58, 22},
    {67, 42, 18, 49, 0, 61, 37, 92, 54, 28, 83},
    {34, 91, 77, 26, 61, 0, 48, 13, 79, 44, 97},
    {89, 24, 52, 73, 37, 48, 0, 68, 35, 99, 64},
    {56, 76, 29, 40, 92, 13, 68, 0, 74, 31, 86},
    {21, 55, 84, 95, 54, 79, 35, 74, 0, 69, 16},
    {78, 38, 47, 58, 28, 44, 99, 31, 69, 0, 57},
    {43, 80, 11, 22, 83, 97, 64, 86, 16, 57, 0}
};

#define N5 12

int g5[N5][N5] = {
    {0, 15, 40, 25, 60, 35, 80, 50, 20, 75, 45, 85},
    {15, 0, 35, 80, 45, 90, 25, 70, 50, 40, 75, 30},
    {40, 35, 0, 60, 20, 75, 50, 30, 80, 45, 10, 95},
    {25, 80, 60, 0, 50, 30, 70, 45, 95, 55, 25, 80},
    {60, 45, 20, 50, 0, 65, 40, 95, 55, 30, 85, 50},
    {35, 90, 75, 30, 65, 0, 55, 15, 85, 50, 100, 35},
    {80, 25, 50, 70, 40, 55, 0, 65, 30, 98, 60, 20},
    {50, 70, 30, 45, 95, 15, 65, 0, 75, 35, 90, 55},
    {20, 50, 80, 95, 55, 85, 30, 75, 0, 70, 18, 92},
    {75, 40, 45, 55, 30, 50, 98, 35, 70, 0, 60, 25},
    {45, 75, 10, 25, 85, 100, 60, 90, 18, 60, 0, 65},
    {85, 30, 95, 80, 50, 35, 20, 55, 92, 25, 65, 0}
};

#define N6 13

int g6[N6][N6] = {
    {0, 12, 45, 23, 67, 34, 89, 56, 21, 78, 43, 90, 32},
    {12, 0, 33, 87, 42, 91, 24, 76, 55, 38, 80, 27, 63},
    {45, 33, 0, 65, 18, 77, 52, 29, 84, 47, 11, 94, 36},
    {23, 87, 65, 0, 49, 26, 73, 40, 95, 58, 22, 85, 60},
    {67, 42, 18, 49, 0, 61, 37, 92, 54, 28, 83, 46, 71},
    {34, 91, 77, 26, 61, 0, 48, 13, 79, 44, 97, 30, 66},
    {89, 24, 52, 73, 37, 48, 0, 68, 35, 99, 64, 17, 82},
    {56, 76, 29, 40, 92, 13, 68, 0, 74, 31, 86, 59, 14},
    {21, 55, 84, 95, 54, 79, 35, 74, 0, 69, 16, 93, 50},
    {78, 38, 47, 58, 28, 44, 99, 31, 69, 0, 57, 20, 85},
    {43, 80, 11, 22, 83, 97, 64, 86, 16, 57, 0, 63, 28},
    {90, 27, 94, 85, 46, 30, 17, 59, 93, 20, 63, 0, 55},
    {32, 63, 36, 60, 71, 66, 82, 14, 50, 85, 28, 55, 0}
};

#define N7 14

int g7[N7][N7] = {
    {0, 15, 40, 25, 60, 35, 80, 50, 20, 75, 45, 85, 30, 70},
    {15, 0, 35, 80, 45, 90, 25, 70, 50, 40, 75, 30, 65, 12},
    {40, 35, 0, 60, 20, 75, 50, 30, 80, 45, 10, 95, 38, 70},
    {25, 80, 60, 0, 50, 30, 70, 45, 95, 55, 25, 80, 60, 18},
    {60, 45, 20, 50, 0, 65, 40, 95, 55, 30, 85, 50, 75, 8},
    {35, 90, 75, 30, 65, 0, 55, 15, 85, 50, 100, 35, 70, 25},
    {80, 25, 50, 70, 40, 55, 0, 65, 30, 98, 60, 20, 85, 55},
    {50, 70, 30, 45, 95, 15, 65, 0, 75, 35, 90, 55, 20, 88},
    {20, 50, 80, 95, 55, 85, 30, 75, 0, 70, 18, 92, 50, 78},
    {75, 40, 45, 55, 30, 50, 98, 35, 70, 0, 60, 25, 85, 65},
    {45, 75, 10, 25, 85, 100, 60, 90, 18, 60, 0, 65, 30, 95},
    {85, 30, 95, 80, 50, 35, 20, 55, 92, 25, 65, 0, 55, 15},
    {30, 65, 38, 60, 75, 70, 85, 20, 50, 85, 30, 55, 0, 50},
    {70, 12, 70, 18, 8, 25, 55, 88, 78, 65, 95, 15, 50, 0}
};

#define N8 15

int g8[N8][N8] = {
    {0, 12, 45, 23, 67, 34, 89, 56, 21, 78, 43, 90, 32, 65, 19},
    {12, 0, 33, 87, 42, 91, 24, 76, 55, 38, 80, 27, 63, 10, 72},
    {45, 33, 0, 65, 18, 77, 52, 29, 84, 47, 11, 94, 36, 70, 25},
    {23, 87, 65, 0, 49, 26, 73, 40, 95, 58, 22, 85, 60, 15, 81},
    {67, 42, 18, 49, 0, 61, 37, 92, 54, 28, 83, 46, 71, 5, 96},
    {34, 91, 77, 26, 61, 0, 48, 13, 79, 44, 97, 30, 66, 20, 53},
    {89, 24, 52, 73, 37, 48, 0, 68, 35, 99, 64, 17, 82, 57, 41},
    {56, 76, 29, 40, 92, 13, 68, 0, 74, 31, 86, 59, 14, 88, 62},
    {21, 55, 84, 95, 54, 79, 35, 74, 0, 69, 16, 93, 50, 75, 39},
    {78, 38, 47, 58, 28, 44, 99, 31, 69, 0, 57, 20, 85, 60, 25},
    {43, 80, 11, 22, 83, 97, 64, 86, 16, 57, 0, 63, 28, 92, 47},
    {90, 27, 94, 85, 46, 30, 17, 59, 93, 20, 63, 0, 55, 10, 75},
    {32, 63, 36, 60, 71, 66, 82, 14, 50, 85, 28, 55, 0, 45, 30},
    {65, 10, 70, 15, 5, 20, 57, 88, 75, 60, 92, 10, 45, 0, 35},
    {19, 72, 25, 81, 96, 53, 41, 62, 39, 25, 47, 75, 30, 35, 0}
};

#define N9 20

int g9[N9][N9] = {
    {0, 15, 40, 25, 60, 35, 80, 50, 20, 75, 45, 85, 30, 70, 18, 55, 38, 65, 22, 90},
    {15, 0, 35, 80, 45, 90, 25, 70, 50, 40, 75, 30, 65, 12, 72, 28, 85, 52, 68, 33},
    {40, 35, 0, 60, 20, 75, 50, 30, 80, 45, 10, 95, 38, 70, 25, 88, 42, 77, 55, 15},
    {25, 80, 60, 0, 50, 30, 70, 45, 95, 55, 25, 80, 60, 18, 82, 40, 97, 65, 28, 73},
    {60, 45, 20, 50, 0, 65, 40, 95, 55, 30, 85, 50, 75, 8, 98, 60, 35, 80, 45, 22},
    {35, 90, 75, 30, 65, 0, 55, 15, 85, 50, 100, 35, 70, 25, 60, 95, 48, 72, 38, 87},
    {80, 25, 50, 70, 40, 55, 0, 65, 30, 98, 60, 20, 85, 55, 40, 75, 62, 90, 45, 50},
    {50, 70, 30, 45, 95, 15, 65, 0, 75, 35, 90, 55, 20, 88, 65, 30, 78, 42, 97, 60},
    {20, 50, 80, 95, 55, 85, 30, 75, 0, 70, 18, 92, 50, 78, 35, 82, 58, 25, 63, 40},
    {75, 40, 45, 55, 30, 50, 98, 35, 70, 0, 60, 25, 85, 65, 20, 95, 38, 72, 55, 28},
    {45, 75, 10, 25, 85, 100, 60, 90, 18, 60, 0, 65, 30, 95, 50, 22, 87, 60, 35, 70},
    {85, 30, 95, 80, 50, 35, 20, 55, 92, 25, 65, 0, 55, 15, 75, 40, 90, 65, 30, 85},
    {30, 65, 38, 60, 75, 70, 85, 20, 50, 85, 30, 55, 0, 50, 25, 70, 45, 80, 55, 20},
    {70, 12, 70, 18, 8, 25, 55, 88, 78, 65, 95, 15, 50, 0, 40, 65, 30, 75, 48, 92},
    {18, 72, 25, 82, 98, 60, 40, 65, 35, 20, 50, 75, 25, 40, 0, 55, 70, 45, 80, 35},
    {55, 28, 88, 40, 60, 95, 75, 30, 82, 95, 22, 40, 70, 65, 55, 0, 35, 90, 60, 25},
    {38, 85, 42, 97, 35, 48, 62, 78, 58, 38, 87, 90, 45, 30, 70, 35, 0, 65, 40, 75},
    {65, 52, 77, 65, 80, 72, 90, 42, 25, 72, 60, 65, 80, 75, 45, 90, 65, 0, 55, 30},
    {22, 68, 55, 28, 45, 38, 45, 97, 63, 55, 35, 30, 55, 48, 80, 60, 40, 55, 0, 65},
    {90, 33, 15, 73, 22, 87, 50, 60, 40, 28, 70, 85, 20, 92, 35, 25, 75, 30, 65, 0}
};

#define N10 30

int g10[N10][N10] = {
    {0, 12, 45, 23, 67, 34, 89, 56, 21, 78, 43, 90, 32, 65, 19, 55, 38, 72, 25, 60, 15, 80, 50, 95, 28, 63, 40, 75, 22, 85},
    {12, 0, 33, 87, 42, 91, 24, 76, 55, 38, 80, 27, 63, 10, 72, 28, 85, 52, 68, 33, 45, 70, 62, 18, 77, 44, 59, 31, 86, 16},
    {45, 33, 0, 65, 18, 77, 52, 29, 84, 47, 11, 94, 36, 70, 25, 88, 42, 77, 55, 15, 60, 35, 90, 22, 67, 40, 75, 20, 95, 30},
    {23, 87, 65, 0, 49, 26, 73, 40, 95, 58, 22, 85, 60, 18, 82, 40, 97, 65, 28, 73, 50, 25, 80, 35, 90, 55, 20, 85, 30, 65},
    {67, 42, 18, 49, 0, 61, 37, 92, 54, 28, 83, 46, 71, 5, 96, 60, 35, 80, 45, 22, 75, 40, 85, 30, 65, 10, 95, 50, 25, 70},
    {34, 91, 77, 26, 61, 0, 48, 13, 79, 44, 97, 30, 66, 20, 53, 95, 48, 72, 38, 87, 52, 17, 92, 57, 42, 87, 62, 37, 82, 47},
    {89, 24, 52, 73, 37, 48, 0, 68, 35, 99, 64, 17, 82, 57, 41, 75, 62, 90, 45, 50, 85, 30, 65, 20, 95, 60, 25, 70, 15, 80},
    {56, 76, 29, 40, 92, 13, 68, 0, 74, 31, 86, 59, 14, 88, 62, 30, 78, 42, 97, 60, 35, 90, 55, 20, 85, 50, 15, 80, 45, 10},
    {21, 55, 84, 95, 54, 79, 35, 74, 0, 69, 16, 93, 50, 75, 39, 82, 58, 25, 63, 40, 95, 60, 25, 70, 35, 90, 55, 20, 85, 30},
    {78, 38, 47, 58, 28, 44, 99, 31, 69, 0, 57, 20, 85, 65, 20, 95, 38, 72, 55, 28, 63, 38, 83, 48, 13, 88, 53, 18, 73, 48},
    {43, 80, 11, 22, 83, 97, 64, 86, 16, 57, 0, 63, 28, 92, 47, 22, 87, 60, 35, 70, 25, 80, 45, 10, 95, 60, 25, 70, 15, 80},
    {90, 27, 94, 85, 46, 30, 17, 59, 93, 20, 63, 0, 55, 10, 75, 40, 90, 65, 30, 85, 50, 15, 80, 45, 10, 95, 60, 25, 70, 35},
    {32, 63, 36, 60, 71, 66, 82, 14, 50, 85, 28, 55, 0, 45, 30, 75, 40, 85, 50, 15, 80, 45, 10, 95, 60, 25, 70, 35, 90, 55},
    {65, 10, 70, 18, 5, 20, 57, 88, 75, 65, 92, 10, 45, 0, 35, 80, 45, 90, 55, 20, 85, 50, 15, 80, 45, 10, 95, 60, 25, 70},
    {19, 72, 25, 82, 96, 53, 41, 62, 39, 20, 47, 75, 30, 35, 0, 65, 30, 75, 40, 85, 50, 15, 80, 45, 10, 95, 60, 25, 70, 35},
    {55, 28, 88, 40, 60, 95, 75, 30, 82, 95, 22, 40, 75, 80, 65, 0, 35, 90, 60, 25, 70, 35, 90, 55, 20, 85, 50, 15, 80, 45},
    {38, 85, 42, 97, 35, 48, 62, 78, 58, 38, 87, 90, 40, 45, 30, 35, 0, 65, 40, 75, 30, 85, 50, 15, 80, 45, 10, 95, 60, 25},
    {72, 52, 77, 65, 80, 72, 90, 42, 25, 72, 60, 65, 85, 90, 75, 90, 65, 0, 55, 30, 85, 50, 15, 80, 45, 10, 95, 60, 25, 70},
    {25, 68, 55, 28, 45, 38, 45, 97, 63, 55, 35, 30, 50, 55, 40, 60, 40, 55, 0, 65, 20, 75, 40, 85, 50, 15, 80, 45, 10, 95},
    {60, 33, 15, 73, 22, 87, 50, 60, 40, 28, 70, 85, 15, 20, 85, 25, 75, 30, 65, 0, 55, 20, 85, 50, 15, 80, 45, 10, 95, 60},
    {15, 45, 60, 50, 75, 52, 85, 35, 95, 63, 25, 50, 80, 85, 50, 70, 30, 85, 20, 55, 0, 65, 30, 75, 40, 85, 50, 15, 80, 45},
    {80, 70, 35, 25, 40, 17, 30, 90, 60, 38, 80, 15, 45, 50, 15, 35, 85, 50, 75, 20, 65, 0, 75, 40, 85, 50, 15, 80, 45, 10},
    {50, 62, 90, 80, 85, 92, 65, 55, 25, 83, 45, 80, 10, 15, 80, 90, 50, 15, 40, 85, 30, 75, 0, 65, 30, 75, 40, 85, 50, 15},
    {95, 18, 22, 35, 30, 57, 20, 20, 70, 48, 10, 45, 95, 80, 45, 55, 15, 80, 85, 50, 75, 40, 65, 0, 75, 40, 85, 50, 15, 80},
    {28, 77, 67, 90, 65, 42, 95, 85, 35, 13, 95, 10, 60, 45, 10, 20, 80, 45, 50, 15, 40, 85, 30, 75, 0, 65, 30, 75, 40, 85},
    {63, 44, 40, 55, 10, 87, 60, 50, 90, 88, 60, 95, 25, 10, 95, 85, 45, 10, 15, 80, 85, 50, 75, 40, 65, 0, 75, 40, 85, 50},
    {40, 59, 75, 20, 95, 62, 25, 15, 55, 53, 25, 60, 70, 95, 60, 50, 10, 95, 80, 45, 50, 15, 40, 85, 30, 75, 0, 65, 30, 75},
    {75, 31, 20, 85, 50, 37, 70, 80, 20, 18, 70, 25, 35, 60, 25, 15, 95, 60, 45, 10, 15, 80, 85, 50, 75, 40, 65, 0, 75, 40},
    {22, 86, 95, 30, 25, 82, 15, 45, 85, 73, 15, 70, 90, 25, 70, 80, 60, 25, 10, 95, 80, 45, 50, 15, 40, 85, 30, 75, 0, 65},
    {85, 16, 30, 65, 70, 47, 80, 10, 30, 48, 80, 35, 55, 70, 35, 45, 25, 70, 95, 60, 45, 10, 15, 80, 85, 50, 75, 40, 65, 0}
};

int main(int argc, char *argv[]) {
    if (argc != 2) {
        printf("Uso: %s <numero_do_grafo>\n", argv[0]);
        printf("Opções: 1 (N=5), 2 (N=8)\n");
        return 1;
    }

    int num_grafo = atoi(argv[1]);
    int n, (*grafo)[num_grafo]; // Usamos N2 como tamanho máximo para simplificar

    switch (num_grafo) {
        case 1:
            n = N1;
            grafo = g1;

            break;
        case 2:
            n = N2;
            grafo = g2;

            break;
        case 3:
            n = N3;
            grafo = g3;

            break;
        case 4:
            n = N4;
            grafo = g4;

            break;
        case 5:
            n = N5;
            grafo = g5;

            break;
        case 6:
            n = N6;
            grafo = g6;

            break;
        case 7:
            n = N7;
            grafo = g7;

            break;
        case 8:
            n = N8;
            grafo = g8;

            break;
        case 9:
            n = N9;
            grafo = g9;

            break;
        case 10:
            n = N10;
            grafo = g10;

            break;
        default:
            printf("Grafo inválido!\n");

            return 1;
    }

    int caminho[n];
    int distancia_total;

    tspVizinhoMaisPerto(n, grafo, caminho, &distancia_total);
    printResults(n, caminho, distancia_total);

    return 0;
}
